{"title":"Three模型压缩","uid":"2ca89c6618e7ab417649e9631a7e5769","slug":"three模型压缩","date":"2020-08-15T10:49:36.000Z","updated":"2024-03-15T02:44:18.859Z","comments":true,"path":"api/articles/three模型压缩.json","keywords":null,"cover":[],"content":"<h1 id=\"Three模型压缩\"><a href=\"#Three模型压缩\" class=\"headerlink\" title=\"Three模型压缩\"></a>Three模型压缩</h1><ul>\n<li><h2 id=\"1，模型压缩\"><a href=\"#1，模型压缩\" class=\"headerlink\" title=\"1，模型压缩\"></a>1，模型压缩</h2></li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>通过模型网格压缩，通过gltf配合Draco压缩的方式，可以在视觉效果近乎一致的情况下，让3D模型文件成倍缩小。（不能压缩贴图）</p></blockquote>\n<ol>\n<li><p>全局安装</p>\n<p><img src=\"https://raw.githubusercontent.com/wuyake/BlogImg/master/three/27254098-512e2ae97836b43d.webp\" alt=\"img\"></p>\n</li>\n<li><p>DRACO压缩算法</p>\n<p>通过Draco进行压缩基本上是有损的，有两点表现：</p>\n<p>1、Draco通过 Edge breaker 3D 压缩算法改变了模型的网格数据的索引方法，缺少了原来的网格顺序；</p>\n<p>2、Draco通过减少顶点坐标、顶点纹理坐标等信息的位数，以减少数据的存储量。</p>\n</li>\n</ol>\n<p><img src=\"https://raw.githubusercontent.com/wuyake/BlogImg/master/three/27254098-7c2ce71d7da33c0b.webp\" alt=\"img\"></p>\n<p>1、地表 gltf-pipeline -i jxl.glb -o test-pipeline-notd.glb  -d    默认压缩</p>\n<p>2、外围 gltf-pipeline -i jxl.glb -o test-pipeline-notd.glb  -d –draco.compressionLevel 9 –draco.quantizePositionBits 14   针对栏杆 降低位置坐标属性</p>\n<p>3、 教学楼 gltf-pipeline -i jxl.glb -o test-pipeline-notd.glb  -d –draco.compressionLevel 9 –draco.quantizePositionBits 14 –draco.quantizeTexcoordBits 20 针对墙面贴图降低纹理坐标属性</p>\n<ul>\n<li><h2 id=\"解压缩\"><a href=\"#解压缩\" class=\"headerlink\" title=\"解压缩\"></a>解压缩</h2></li>\n</ul>\n<p>1、new一个 DRACOLoader对象</p>\n<p>2、设置下载的 draco压缩js文件路径</p>\n<p>3、new模型文件加载器</p>\n<p>4、设置模型加载器解压缩</p>\n<p>5、正常使用模型加载得到解压缩过的模型</p>\n<p><img src=\"https://raw.githubusercontent.com/wuyake/BlogImg/master/three/27254098-40fa6e92113bb909.webp\" alt=\"img\"></p>\n","text":"Three模型压缩 1，模型压缩 通过模型网格压缩，通过gltf配合Draco压缩的方式，可以在视觉效果近乎一致的情况下，让3D模型文件成倍缩小。（不能压缩贴图...","permalink":"/post/three模型压缩","photos":[],"count_time":{"symbolsCount":700,"symbolsTime":"1 mins."},"categories":[{"name":"前端","slug":"前端","count":11,"path":"api/categories/前端.json"}],"tags":[{"name":"Threejs","slug":"Threejs","count":2,"path":"api/tags/Threejs.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Three%E6%A8%A1%E5%9E%8B%E5%8E%8B%E7%BC%A9\"><span class=\"toc-text\">Three模型压缩</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1%EF%BC%8C%E6%A8%A1%E5%9E%8B%E5%8E%8B%E7%BC%A9\"><span class=\"toc-text\">1，模型压缩</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E5%8E%8B%E7%BC%A9\"><span class=\"toc-text\">解压缩</span></a></li></ol></li></ol>","author":{"name":"WuYa","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/53419296?v=4","link":"/","description":"一位正在记笔记的人","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"对象，包装类","uid":"5e60f71d8b27147668f2372e11e03f0e","slug":"对象，包装类","date":"2020-08-15T10:49:36.000Z","updated":"2024-03-14T08:14:12.199Z","comments":true,"path":"api/articles/对象，包装类.json","keywords":null,"cover":null,"text":"对象，包装类1，对象直接量/自变量12345var obj = { name = \"xiaoliu\", sex = \"male\"} 属性与属性值用冒号来连接。 ...","permalink":"/post/对象，包装类","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"前端","slug":"前端","count":11,"path":"api/categories/前端.json"}],"tags":[{"name":"Javascript","slug":"Javascript","count":4,"path":"api/tags/Javascript.json"}],"author":{"name":"WuYa","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/53419296?v=4","link":"/","description":"一位正在记笔记的人","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{}}